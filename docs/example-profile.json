{
  "debug": {
    "_processOnly": ["poem-2074", "poem-2077", "poem-2094", "poem-2095", "poem-2111"],
    "_mostRecent": 3,
    "_skipCovers": false,
    "_skipAudio": true
  },

  "profile": "catpea.github.io",
  "title": "Cat Pea",
  "url": "https://catpea.com",

  "src": "database/posts",
  "dest": "dist/{profile}/docs",

  "theme": {
    "src": "themes/striped-dark-solarize",
    "dest": "dist/{profile}/docs"
  },

  "skip": {
    "fastModificationCheck": false
  },

  "pagerizer": {
    "pp": 24,
    "dest": "dist/{profile}/docs"
  },

  "feed": {
    "dest": "dist/{profile}/docs/feed.xml"
  },

  "cover": {
    "dest_original": "dist/{profile}/docs/permalink/{guid}/cover.avif",
    "url_original": "/permalink/{guid}/cover.avif",

    "dest": "dist/chapters/chapter-{chapter}/docs/{id}.avif",
    "url": "https://catpea.github.io/chapter-{chapter}/{id}.avif",

    "width": 1024,
    "height": 1024,
    "quality": 80,
    "effort": 4,
    "exif": {
      "IFD0": {
        "Copyright": "Cat Pea",
        "ImageDescription": "Cat Pea Blog Post Cover"
      }
    }
  },

  "audio": {
    "dest": "dist/chapters/chapter-{chapter}/docs/{id}.mp3",
    "url": "https://catpea.github.io/chapter-{chapter}/{id}.mp3",

    "preset": "balanced",
    "id3": {
      "artist": "Cat Pea",
      "album_artist": "Cat Pea",
      "publisher": "catpea.com",
      "genre": "Podcast"
    }
  },

  "playlist": {
    "src": "dist/chapters/chapter-*/docs/*.mp3",
    "url": "https://catpea.github.io/chapter-{chapter}/{id}.mp3",
    "dest": "dist/{profile}/docs/playlist.m3u",
    "intermediate": true
  },

  "respectExisting": {
    "cover": true,
    "audio": true
  },

  "text": {},

  "server": {
    "port": 8590,
    "static": [
      "dist/{profile}/docs",
      "dist/chapters/"
    ]
  },

  "agent": {
    "url": "http://localhost:11434/v1/chat/completions",
    "model": "llama3",
    "system": "You are an AI assistant helping improve blog posts. Follow task-specific instructions carefully.",
    "yolo": false,
    "contextSize": 2480,
    "tasks": [
      {
        "name": "spellcheck",
        "prompt": "Fix spelling and grammar in the following text.",
        "target": "text.md",
        "system": "You are a careful proofreader. Return ONLY JSON arrays of corrections.",
        "strategy": "iterative-spellcheck",
        "reflect": true
      },
      {
        "name": "tags",
        "prompt": "Choose relevant tags for this post. Return a JSON array of strings.",
        "target": "post.json:tags",
        "system": "You are a content tagger. Return only a JSON array of lowercase tag strings.",
        "skipExisting": true,
        "autoAccept": true
      },
      {
        "name": "description",
        "prompt": "Write a one-sentence summary of this post.",
        "target": "post.json:description",
        "system": "You are a content summarizer. Return only the summary sentence.",
        "skipExisting": true,
        "autoAccept": true
      },
      {
        "name": "evaluate",
        "prompt": "Evaluate this post's quality.",
        "target": "post.json",
        "strategy": "evaluate",
        "autoAccept": true,
        "evaluate": {
          "thresholds": { "spelling": 8, "tags": 8, "description": 8 },
          "subTasks": { "spelling": "spellcheck", "tags": "tags", "description": "description" }
        }
      }
    ]
  }
}
